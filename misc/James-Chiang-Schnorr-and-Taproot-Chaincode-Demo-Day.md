---
title: James Chiang, Schnorr and Taproot - Chaincode  Demo Day
transcript_by: adamjonas via TBTBTC v1.0.0
media: https://www.youtube.com/watch?v=VAJT8TPfpcs
tags: ["Taproot"]
speakers: ["James Chiang"]
date: 2019-09-05
---

 Hello everyone, my name is James. Thanks for coming all today to support OpenSource Bitcoin. I'd like to talk about what I was on this summer. I worked on Taproot and a privacy toolkit for developers. So I'm based in Zurich. I'm U.S. born to Taiwanese parents and I spend a good part of my life in Switzerland. I first learned about Bitcoin when Mt Gox was hacked in 2014. Back then, none of my friends in Tokyo could tell me what Bitcoin was that has changed quite a bit since then, but come a long way. I learned Bitcoin by building a lot of mini projects to learn about what transactions are our testnet, what kind of P2B messages exist and how the protocol works, and like basic payment channels. I learned all this stuff by building these little small projects. And these projects eventually grew into a full Bitcoin developer course. And that's what I teach today at 21 lecturers. I'm a coach writer with UNESCO and Christian Decker. These are a long time core contributors. And for those who can't come, I have an online class at teachbecoin.io. Why teach part of the curriculum over the fourth week period online? The people who come to this course are developers from exchanges, Bitcoin ATMs, Bitcoin Wall manufacturers, and it's pretty cool because these guys work with Bitcoin every day, but they mostly interact with Bitcoin via the RPC interface. And this has actually spend a couple of days building on top of the protocol directly, is pretty cool. I'm very fond of it. So I enjoy that a lot. I'm also a contributor to Libcoin. Libcoin is a C++ Bitcoin library, and it provides a lot of the low-level libraries and modules for somebody to get smart about the Bitcoin protocol. If we're Bitcoin, I worked at a couple of startups. I'm a co-founder of a full-level take simulation company. I've also worked in data science. I started on my career at NASA at the Jet Propulsion Lab in Pasadena. And I think there's some parallels and experts that had there with Bitcoin, namely, the design process is extremely rigorous. You have a lot of mission-critical components. And I see that happening in Bitcoin as well, where you have a lot of people reviewing every little change, except that happens online and not in a conference room. Okay, so why is Bitcoin important to me? Bitcoin is important to me because I believe it became apparent to me that the ports of Bitcoin really is in its role as an alternative, right? Not more, not less. And it can only be an alternative money if a remains censorship resistant as a technology as an open-source project. It cannot work without privacy. If the actors in the system are not anonymous, they can be attacked. So this is something that I believe is extremely important to the success of the Bitcoin project in the long term and something that I really wanted to work on. And fortunately, Bitcoin is just sort of private today. It's not very private, right? Like the chain analysis tools, as you probably all know, have become very sophisticated, they're very strong here, risks to be able to determine Bitcoin ownership, Bitcoin Tain. And together with KYC, they're kind of risks by circuiting the system into a white and black market part. So that's not good. We do have some kind of measures like coin-joint, coin-joint is useful, but it's relative expensive. And anonymity said it's not guaranteed. You don't really know who you're mixing with, obviously. There is some more advanced privacy tech. A lot that's happening in cryptography. But a lot that may be in research phase is very complex. So we'll take a lot of time before it makes itself a waste. We do have layering protocols like lightning that have been pretty successful than having a lot of traction. But the thing with layering protocols is that they rely on contracting protocols, which once dropped on chain can be correlated and are visible to the public. So that's something that we can improve. So this is where Schmoren Tapper would make a big difference in terms of privacy. These are proposals, two proposals, together with Tapper script three proposals, which are written by Peter Willey with the help of a lot of other contributors. And in terms of privacy, they bring two important things. Firstly, indistinguishable contracts. That means we have outputs which are a lock by different spending conditions, but to the observer on chain, they look like regular puppies. And therefore indistinguishable. Tapper introduced the ability to hide complex script structures into a puppy. So in that sense, they are hidden from the observer on chain. And these are both huge privacy wins for Bitcoin. But it is Bitcoin after all. So changes require consensus. So people users will need to use them. Developers will need to support the upgrade. And so requires some kind of socialization in the community for Schmoren Tapper to actually be activated. And I think what I wanted to work on this summer is to provide an accessible way for a developer to do that. And today we don't have easy to use toolkits for a developer to immediately build on top of Schmoren Tapper. So that's what I did. So this is my project. It's a developer toolkit built on top of Bitcoin Core. Specifically, it's a Tapper Grange written by Peter Willey. The Tapper consensus is already implemented. But there is only very thin shnore and Tapper class layer in the original branch. So what I've done is expanded with modules like Music, Adaptorsix, Discrete Law Contracts, and Tapper classes, which allow the user to actually experience how to give the user the tools to build very private protocols without having to read the paper, build their own implementation, from scratch, from just Tapper and Shnore. So to demonstrate what a developer can do with the library, I like to show some examples. So the first examples are our indistinguishable contracts. These are basically primitives which are a power-bushnore. The first one is Music. So today, a multi-sick spend or an output, that's a very observable on-chain because they're multiple puppies that are visible. Music allows us to aggregate these puppies so that on-chain, a single puppy is only visible. Singles were signing when this puppy is spent. The signatures from the multiple parties can be aggregated, and the only single signature is dropped to chain. So from the on-chain observer, point of view, this looks like a regular single spend transaction. So the anonymity set becomes much larger, even though it's actually a multi-sick-nature contract. Another useful tool for privacy or atomic swaps. So atomic swaps are when two users swap coins without anybody else knowing. They're by obscuring the coin ownership. If we want to do that today, however, it requires a hash-based system, or a hash-bed output, which means that a transaction requires a secret pre-image to be spent, and that pre-image then is used in the second transaction. Where the funds are being exchanged. And because the pre-image needs to be dropped on-chain in the witness, these two transactions can be correlated by any on-chain observer. So that's not good for privacy, obviously. With Schnor and adapter signatures, we can do much better. So adapter signatures always are forms, signature pairs with regular signatures, and the correlating secret is hidden within. So you can see in the first transaction where A is in to B, be signature together with the adapter signature releases a secret off-chain, and the second user can then use that secret to reconstruct the signature, here she needs, to conduct the second transaction, thereby completing the swap. So we swapped coin owners, and we've done it in a way where these two transactions are completely uncorrelated on-chain. So that's great from the privacy point of view. Schnor also enables new features, new contracting features, which were impossible before. So in this case, we want to have different contracts or puppies. Execute only if an off-chain Oracle creates the corresponding signature. So say Oracle signs B that A. That signature allows signature one to be created, which spends pub key one, but not for pub key two, and not for pub key three. If the Oracle signs for event B, the second pub key can execute. If Oracle signs for C, the third. So this allows us to bring trusted off-chain information onto on-chain script execution. Again, in a way which is observable by the on-chain observer, they just look like regular single-spend transactions. So this can part of the toolkit is around taproot. Taproot means we can hide Bitcoin script in a very nice way. So let's first consider how Bitcoin scripts work today. This is, I think, recognized in the HLC. HLCs are used to forward payments and lightning, and an HLC needs to encapsulate quite a bit of, you know, spending logic. The first one is the success case. So the forwarding payment has been successfully delivered. This is the part of the execution of the script that is actually executed, highlighted in orange. The forwarding attempt can also fail. You can time out and need to be reversed. And that's the case where this part of the script is being executed. And finally, the state of the channel can be updated where the HLCs must be revoked, and that executes, again, another part of the script. So every time these scripts are actually dropped on chain, the entire contract is revealed revealing quite a bit of information, which can be correlated to de-anonymize users of the lightning network. So we can do better. With a taproot toolkit, the user now doesn't need to worry about Bitcoin script. It simplifies things quite a bit. The user only needs to worry about the different spending conditions. The first one being success, the pub key and a hash, the second one being a timeout, pub key and a time. And the third one being revocation, where we just need a revocation key. The different spending paths are only revealed if that scenario occurs. So you can see in the timeout scenario, it's this branch, in the revocation scenario, it's this branch, and only a proof of that branch needs to be broadcasted on chain. And everything else remains secret and private. So the goal here is to provide the developer with a basic highly-relevel language. We can introduce tap script descriptors, so that they even have to worry about Bitcoin script, and can actually just implement the kind of contracting logic that they want together with the utilities like the tree solver, which generate the tree structure for more complex taproot outputs. So you can see the privacy design space has really been open up quite a bit with which North and Taperot, and that's really a huge win. However, this stuff takes time. I think if there's something that we learn with segway is that the socialization of a new soft fork is really something that needs engagement of the community. And in the meantime, Taperot itself takes time before it's actually integrated into Bitcoin core fully. In the meantime, in this period of time, developers need tools, which allow them to easily and assessably start using the power of story in Taperot to build protocols and applications, prototypes, and Taperot's uptake has been a great supporter of this project this summer. We will be using this library to deliver two workshops and coming weeks where we teach taproot and Shnor to the developers in the Bitcoin industry. For myself, I really look forward to being part of this process to bring Taperot and Shnor to activation. One of the things that I really want to look on in contribute to as well is implementing the technology into other parts of Bitcoin core like the world which will eventually destroy as a reference client implementation for the wider community.
